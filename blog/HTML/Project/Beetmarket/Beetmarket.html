<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Beetmarket</title>
  <link rel="stylesheet" href="../../../css/Beetmarket/Beetmarket.css">
  <link rel="stylesheet" href="Beetmarket(Media Query).css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h1 class="project-title">비트마켓(Beetmarket)팀 프로젝트</h1>
      <img src="../../../image/projects/beetmarket/beetmarket사진.png"/>
    </div>

    <div class="Introduction">
      <h3>요약</h3>
      <ul>
        <li>비트마켓의 온라인 쇼핑몰에서 메인 개발과 상품에 대한 리뷰 및 상품 Q&A 기능을 개발했습니다.</li>
      </ul>
      
      <h3>역할</h3>
      <ul>
        <li>프로젝트 팀 인원 7명</li>
        <li>역할: 서기(회의 기록, 문서 취합, PPT 제작)</li>
        <li>담당: 메인페이지 & 리뷰 & qna</li>
      </ul>
      
      <h3>프로젝트 기간</h3>
      <ul>
        <li>프로젝트 진행 기간 (2024.9.10 ~ 2024.10.1)</li>
      </ul>
      
      <h3>도구 및 기술</h3>
      <ul>
        <li><strong>개발도구:</strong> Eclipse(STS3)</li>
        <li><strong>DBMS:</strong> Oracle11g xe</li>
        <li><strong>개발언어:</strong> JAVA(JDK11), HTML, CSS, JavaScript</li>
        <li><strong>라이브러리:</strong> jQuery, Bootstrap</li>
        <li><strong>프레임워크:</strong> Spring Framework</li>
        <li><strong>데이터베이스 관리 도구:</strong> Oracle SQL Developer</li>
        <li><strong>템플릿 엔진:</strong> JSP</li>
        <li><strong>서버:</strong> Apache Tomcat9.0</li>
      </ul>
    </div> 

    <div class="Document">
      <details>
      <summary class="summary-heading">📄문서작업</summary>
      <h3>요구사항 정의서</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 리뷰 요구사항 정의서 1.png" class="zoomable"/>
      <img src="../../../image/projects/beetmarket/비트마켓 리뷰 요구사항 정의서 2.png" class="zoomable"/>
      <img src="../../../image/projects/beetmarket/비트마켓 리뷰 요구사항 정의서 3.png" class="zoomable"/>
      <img src="../../../image/projects/beetmarket/비트마켓 q&a 요구사항 정의서 1.png"  class="zoomable"/>
      <img src="../../../image/projects/beetmarket/비트마켓 q&a 요구사항 정의서 2.png"  class="zoomable"/>
      <img src="../../../image/projects/beetmarket/비트마켓 q&a 요구사항 정의서 3.png" class="zoomable"/>

      <h3>테이블 정의서</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 리뷰 테이블 정의서 1.png"  class="zoomable"/>
      <img src="../../../image/projects/beetmarket/비트마켓 리뷰 테이블 정의서 2.png"  class="zoomable"/>
      <img src="../../../image/projects/beetmarket/비트마켓 리뷰 테이블 정의서 3.png"  class="zoomable"/>
      <img src="../../../image/projects/beetmarket/비트마켓 q&a 테이블 정의서 1.png"  class="zoomable"/>

      <h3>Flow Diagram</h3>
      <p>1.리뷰 & 리뷰답변 & 리뷰 좋아요기능</p>
      <img src="../../../image/projects/beetmarket/비트마켓 리뷰 Flow Diagram.jpg" class="zoomable"/>
      <p>2.상품 Q&A 질문 답변 기능</p>
      <img src="../../../image/projects/beetmarket/비트마켓 q&a Flow Diagram.jpg" class="zoomable"/>

      <h3>메뉴흐름도</h3>
      <p>1.리뷰</p>
      <img src="../../../image/projects/beetmarket/비트마켓 리뷰 메뉴흐름도.jpg" class="zoomable"/>
      <p>2.상품 Q&A</p>
      <img src="../../../image/projects/beetmarket/비트마켓 q&a 메뉴흐름도.jpg" class="zoomable"/>
     </details>
    </div>

    <hr>

    <div class="project">
      <details>
      <summary class="summary-heading">💻프로젝트 화면</summary>
      <h3>0.메인 홈페이지</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 0.메인 홈페이지(프로젝트 화면).png" class="zoomable"/>
      <ul>
        <li><b>비트마켓 메인홈페이지로 이벤트와 상품 정보,  공지사항을 제공하며 사이드메뉴로 쉽게 메뉴이동이 가능합니다.</b></li>
      </ul>
      <details>
        <summary><b>출력 데이터</b></summary>
        <ul>
          <li>이벤트 사진</li>
          <li>상품 사진</li>
          <li>상품명</li>
          <li>상품 가격</li>
          <li>공지 제목</li>
          <li>공지 시작일</li>
        </ul>
      </details>
      
      <details>
        <summary><b>링크</b></summary>
        <ul>
          <li><b>회원가입:</b> (member wrtieForm.do)</li>
          <li><b>로그인:</b> (loginForm.do)</li>
          <li><b>쇼핑:</b> (goods list.do)</li>
          <li><b>이벤트:</b> (event list.do)</li>
          <li><b>공지사항:</b> (notice list.do)</li>
          <li><b>포인트샵:</b> (pointShopModal.jsp)</li>
          <li><b>주식:</b> (stcok Main.do)</li>
          <li><b>faq:</b> (faq list.do)</li>
        </ul>
      </details> 

      <hr>

      <h3>1.리뷰 리스트</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 1. 리뷰 리스트 (프로젝트 화면).png" class="zoomable"/>
      <ul>
        <li><b>사용자에게 시각적으로 상품을 구매한 구매자들의 상품 평점을 제공하고, 판매자는 이를 통해 구매자의 피드백을 수집할 수 있도록 개발되었습니다.</b></li>
      </ul>
      <details>
        <summary><b>출력 데이터</b></summary>
        <ul>
          <li><b>전체 리뷰 수:</b> 몇 개의 리뷰가 있는지 표시</li>
          <li><b>사용자 총 평점 과 별점:</b> 사용자들이 남긴 평점의 평균을 계산하고 별점으로 표시</li>
          <li><b>리뷰 별점:</b> 각 리뷰의 별점</li>
          <li><b>작성자 ID:</b> 리뷰 작성자의 아이디</li>
          <li><b>리뷰 작성일:</b> 리뷰가 작성된 날짜</li>
          <li><b>리뷰 내용:</b> 사용자가 남긴 리뷰 내용</li>
          <li><b>리뷰 이미지:</b> 사용자가 업로드한 이미지 (클릭 시 확대)</li>
        </ul>
      </details>
      
      <details>
        <summary><b>입력 데이터</b></summary>
        <ul>
          <li><b>좋아요 버튼:</b> 사용자가 리뷰에 좋아요를 남길 수 있는 기능</li>
        </ul>
      </details>

      <details>
        <summary><b>링크</b></summary>
        <ul>
          <li><b>리뷰 수정:</b> (Review UpdateForm.do)</li>
          <li><b>리뷰 삭제(X 모양):</b> (Review Delete.do)</li>
        </ul>
      </details> 

      <hr>

      <h3>2.리뷰 등록</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 2. 리뷰 등록 (프로젝트 화면).png" class="zoomable"/>
      <ul>
        <li><b>구매자가 리뷰를 등록할 때 구매자의 후기를 다른 사람들에게 공유할 수 있도록 주문 관리에서 별점 과 리뷰 내용 입력하고 구매자가 촬영한 리뷰 이미지를 등록하면 리스트에 출력 되도록 개발했습니다.</b></li>
      </ul>
      <details>
        <summary><b>출력 데이터</b></summary>
        <ul>
          <li><b>상품명:</b> 해당 상품에 대한 상품명 출력</li>
          <li><b>옵션 선택:</b> 해당 상품의 옵션 출력</li>
          <li><b>수량:</b> 상품을 몇 개 구매했는지 표시</li>
          <li><b>이미지 출력:</b> 선택한 이미지 미리보기 기능</li>
        </ul>
      </details>
      
      <details>
        <summary><b>입력 데이터</b></summary>
        <ul>
          <li><b>별점:</b> 작성자가 별점을 남길 수 있는 기능</li>
          <li><b>리뷰 내용:</b> 해당 상품에 대한 내용을 작성할 수 있는 기능</li>
          <li><b>리뷰 이미지:</b> 구매한 상품의 이미지를 업로드 할 수 있는 기능</li>
        </ul>
      </details>

      <details>
        <summary><b>링크</b></summary>
        <ul>
          <li><b>등록:</b> (Review Write.do)</li>
          <li><b>닫기:</b> (Modal dismiss)</li>
        </ul>
      </details>

      <hr>

      <h3>3.리뷰 수정</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 3. 리뷰 수정 (프로젝트 화면).png" class="zoomable"/>
      <ul>
        <li><b>구매자가 등록한 리뷰를 수정 할 수 있도록  리뷰 내용과 별점, 리뷰 이미지를 수정할 수 있도록 개발했습니다.</b></li>
      </ul>
      <details>
        <summary><b>출력 데이터</b></summary>
        <ul>
          <li><b>리뷰 번호:</b> (내부 데이터)</li>
          <li><b>상품 번호:</b> (내부 데이터)</li>
          <li><b>리뷰 내용:</b> 기존에  작성된 리뷰 내용을 출력하여 사용자가 수정할 수 있게 함</li>
          <li><b>별점 (3점):</b> 사용자가 처음에 입력한 리뷰의 별점</li>
          <li><b>리뷰 이미지:</b> 기존에 업로드 된 이미지 (있을 경우)</li>
        </ul>
      </details>
      
      <details>
        <summary><b>입력 데이터</b></summary>
        <ul>
          <li><b>리뷰 내용:</b> 수정된 리뷰 내용 (예: 배송이 늦게 왔어요)</li>
          <li><b>별점:</b> 수정된 별점 (예:4점)</li>
          <li><b>리뷰 이미지:</b> 이미지 수정 가능</li>
        </ul>
      </details>

      <details>
        <summary><b>링크</b></summary>
        <ul>
          <li><b>등록:</b> (Review Update.do)</li>
          <li><b>닫기:</b> (Modal dismiss)</li>
        </ul>
      </details>

      <hr>

      <h3>4.리뷰 삭제</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 4. 리뷰 삭제 (프로젝트 화면).png" class="zoomable"/>
      <ul>
        <li><b>구매자가 리뷰를 삭제할 때 삭제 확인 여부를 팝업창을 통해 확인하고 삭제가 완료되면 리스트 화면으로 돌아갈 수 있도록 개발했습니다.</b></li>
      </ul>
      <details>
        <summary><b>링크</b></summary>
        <ul>
          <li><b>확인:</b> (delete.do)</li>
          <li><b>취소:</b> (list.do)</li>
        </ul>
      </details>

      <hr>

      <h3>5.리뷰 답변 리스트</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 5. 리뷰 답변 리스트 (프로젝트 화면).png" class="zoomable"/>
      <ul>
        <li><b>판매자는 리뷰를 달아준 구매자에게 감사 인사와 별점과 리뷰 내용을 통해 피드백을 받을 수 있도록 하기 위해 개발했습니다.</b></li>
      </ul>
      <details>
        <summary><b>출력 데이터</b></summary>
        <ul>
          <li><b>판매자 ID:</b> 판매자 아이디 </li>
          <li><b>리뷰 답변 내용:</b> 판매자가 남긴 답변</li>
          <li><b>답변일:</b> 답변이 작성된 날짜</li>
        </ul>
      </details>
 
      <details>
        <summary><b>링크</b></summary>
        <ul>
          <li><b>답변하기:</b> (Reply WriteForm.do)</li>
          <li><b>답변 수정하기:</b> (Reply Update.do)</li>
        </ul>
      </details>

      <hr>

      <h3>6.리뷰 답변 등록</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 6. 리뷰 답변 등록 (프로젝트 화면).png" class="zoomable"/>
      <ul>
        <li><b>리뷰의 답변을 할 수 있도록 등록 모달창에서 답변 내용을 적을 수 있도록 개발하였습니다.</b></li>
      </ul>
      <details>
        <summary><b>입력 데이터</b></summary>
        <ul>
          <li><b>답변 내용:</b> 판매자가 답변내용을 입력 할 수 있는 기능</li>
        </ul>
      </details>
 
      <details>
        <summary><b>링크</b></summary>
        <ul>
          <li><b>등록:</b> (Reply Write.do)</li>
          <li><b>닫기:</b> (Modal dismiss)</li>
        </ul>
      </details> 

      <hr>

      <h3>7.리뷰 답변수정</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 7. 리뷰 답변수정 (프로젝트 화면).png" class="zoomable"/>
      <ul>
        <li><b>리뷰 답변을 수정할 수 있고 수정된 답변은 리스트에 반영이 되도록 개발하였습니다.</b></li>
      </ul>
      <details>
        <summary><b>입력 데이터</b></summary>
        <ul>
          <li><b>답변 내용:</b> 판매자가 답변 내용을 수정할수 있는 기능</li>
        </ul>
      </details>
 
      <details>
        <summary><b>링크</b></summary>
        <ul>
          <li><b>등록:</b> (Reply Update.do)</li>
          <li><b>닫기:</b> (Modal dismiss)</li>
        </ul>
      </details>

      <hr>

      <h3>8.리뷰 답변삭제</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 8. 리뷰 답변삭제 (프로젝트 화면).png" class="zoomable"/>
      <ul>
        <li><b>판매자가 리뷰를 삭제할  때 삭제 확인 여부를 확인할 수 있는  팝업창을 통해 삭제를 진행할 수 있도록  개발했습니다.</b></li>
      </ul>
      <details>
        <summary><b>링크</b></summary>
        <ul>
          <li><b>확인:</b> (Reply Delete.do)</li>
          <li><b>취소:</b> (Modal dismiss)</li>
        </ul>
      </details>

      <hr>

      <h3>9.Q&A질문 리스트</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 9. Q&A질문 리스트 (프로젝트 화면).png" class="zoomable"/>
      <ul>
        <li><b>다른 사람들이 상품에 대한 질문과 판매자의 답변을 볼 수 있도록 개발하였습니다.</b></li>
      </ul>
      <details>
        <summary><b>출력 데이터</b></summary>
        <ul>
          <li><b>질문내용:</b> 사용자들이 작성한 질문의 내용</li>
          <li><b>질문자 ID:</b> 질문을 작성한 질문자ID</li>
          <li><b>질문일:</b> 질문이 작성된 날짜</li>
          <li><b>질문상태:</b> 질문의 상태 (답변 대기 중 또는 완료)</li>
        </ul>
      </details>

      <details>
        <summary><b>링크</b></summary>
        <ul>
          <li><b>질문 등록:</b> (GoodsQ&A WriteForm.do)</li>
          <li><b>질문 수정:</b> (GoodsQ&A UpdateForm.do)</li>
          <li><b>질문 삭제:</b> (GoodsQ&A Delete.do)</li>
        </ul>
      </details>

      <hr>

      <h3>10.Q&A질문 등록</h3>
      <img src="../../../image/projects/beetmarket/비트마켓10. Q&A질문 등록 (프로젝트 화면).png" class="zoomable"/>
      <ul>
        <li><b>질문 등록 모달 창에서는 문의하고 싶은 내용을 작성할 수 있으며, 작성 후 등록 버튼을 클릭하면 AJAX로 이용하여 실시간으로 리스트에 반영되도록 개발하였습니다.</b></li>
      </ul>
      <details>
        <summary><b>입력 데이터</b></summary>
        <ul>
          <li><b>질문내용:</b> 질문 내용을 입력할 수 있는 기능</li>
        </ul>
      </details>

      <details>
        <summary><b>링크</b></summary>
        <ul>
          <li><b>등록:</b> (GoodsQ&A Write.do)</li>
          <li><b>취소:</b> (Modal dismiss)</li>
        </ul>
      </details>

      <hr>

      <h3>11.Q&A질문 수정</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 11. Q&A질문 수정 (프로젝트 화면).png" class="zoomable"/>
      <ul>
        <li><b>사용자가 등록한 질문을 수정할 수 있으며, AJAX를 이용하여 실시간으로 수정이 반영되도록 개발하였습니다.</b></li>
      </ul>
      <details>
        <summary><b>출력 데이터</b></summary>
        <ul>
          <li><b>질문내용:</b> 사용자가 작성한 질문 내용</li>
        </ul>
      </details>
      
      <details>
        <summary><b>입력 데이터</b></summary>
        <ul>
          <li><b>질문내용:</b> 내용을 수정할 수 있는 기능</li>
        </ul>
      </details>

      <details>
        <summary><b>링크</b></summary>
        <ul>
          <li><b>수정:</b> (GoodsQ&A Update.do)</li>
          <li><b>취소:</b> (Modal dismiss)</li>
        </ul>
      </details>

      <hr>

      <h3>12.Q&A질문 삭제</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 12. Q&A질문 삭제 (프로젝트 화면).png" class="zoomable"/>
      <ul>
        <li><b>등록한 질문을 삭제하기 위해 '질문을 삭제하시겠습니까?' 확인 문구가 나오고, '삭제' 버튼을 클릭하면 AJAX를 이용해서 실시간으로 삭제를 진행할 수 있도록 개발하였습니다.</b></li>
      </ul>
      <details>
        <summary><b>링크</b></summary>
        <ul>
          <li><b>삭제:</b> (GoodsQ&A Delete.do)</li>
          <li><b>취소:</b> (Modal dismiss)</li>
        </ul>
      </details>

      <hr>

      <h3>13.Q&A답변 등록</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 13. Q&A답변 등록  (프로젝트 화면).png" class="zoomable"/>
      <ul>
        <li><b>질문에 답변하기 위해 판매자가 답변 등록 모달 창을 통해 답변을 등록할 수 있으며, '답변하기' 버튼을 클릭하면 AJAX를 이용해 실시간으로 답변 등록이 되도록개발하였습니.</b></li>
      </ul>
      <details>
        <summary><b>입력 데이터</b></summary>
        <ul>
          <li><b>답변 내용:</b> 답변을 입력할 수 있는 기능</li>
        </ul>
      </details>
      
      <details>
        <summary><b>링크</b></summary>
        <ul>
          <li><b>답변하기:</b> (GoodsQ&A answeranWrite.do)</li>
        </ul>
      </details>

      <hr>
      
      <h3>14.Q&A답변 등록 후 리스트</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 14. Q&A답변 등록 후 리스트  (프로젝트 화면).png" class="zoomable"/>
      <ul>
        <li><b>답변을 등록하면 질문 밑에 판매자명, 답변내용, 답변일 답변 상태가 출력 되도록 만들었습니다.</b></li>
      </ul>
      <details>
        <summary><b>출력 데이터</b></summary>
        <ul>
          <li><b>판매자명:</b> 답변을 작성한 판매자의 이름</li>
          <li><b>답변 내용:</b> 작성된 답변의 내용</li>
          <li><b>답변일:</b> 답변이 작성된 날짜</li>
          <li><b>답변 상태:</b> 답변의 현재 상태 (예: 답변완료)</li>
        </ul>
      </details>
      
      <details>
        <summary><b>링크</b></summary>
        <ul>
          <li><b>답변 등록:</b> (GoodsQ&A answeranWrite.do)</li>
          <li><b>답변 삭제:</b> (GoodsQ&A answeranDelete.do)</li>
        </ul>
      </details>

      <hr>

      <h3>15.Q&A답변 삭제</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 15. Q&A답변 삭제  (프로젝트 화면).png" class="zoomable"/>
      <ul>
        <li><b>답변을 삭제 할 때 '답변을 삭제 하시겠습니까?' 확인 문구가 나오고 '삭제' 버튼을 클릭하면 AJAX를 이용해 실시간으로 삭제 진행을 할 수 있도록 개발했습니다.</b></li>
      </ul>
      <details>
        <summary><b>링크</b></summary>
        <ul>
          <li><b>삭제:</b> (GoodsQ&A answeraDelete.do)</li>
          <li><b>취소:</b> (GoodsQ&A list.do)</li>
        </ul>
      </details> 
      </details>
    </div>

    <hr>

    <div class="core-code">
      <details>
      <summary class="summary-heading">🔑핵심코드</summary>
      <h2>1.리뷰 리스트 평균 평점</h2>
      <h3>Review List Controller</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 Review List Controller 1 (핵심코드).png" style="display: block; margin-bottom: 20px;" class="zoomable"/>
      <img src="../../../image/projects/beetmarket/비트마켓 Review List Controller 1-2 (핵심코드).png" class="zoomable"/>
      <ul>
        <li><b>위 코드는 리뷰 리스트를 불러오고, 총 리뷰 리뷰 개수 및 평균 평점을 계산하고 표시하며 특정 상품의 리뷰 페이지 관련 정보를 전달합니다.</b></li>
      </ul>
      <details>
        <summary><b>총 리뷰 개수 가져오기</b></summary>
        <pre>
          <code>
            Long totalReviewCount = service.getTotalRow(pageObject, goodsNo);
          </code>
        </pre>
        <ul>
          <li><b>getTotalRow</b>메서드를 호출하여 <b>해당 상품의 총 리뷰 개수</b>를 가져옵니다.</li>
          <li><b>pageObject</b>는 페이지 관련 정보를 포함합니다.</li>
          <li><b>goodsNo</b>는 리뷰를 조회 할 상품의 번호 입니다.</li>
          <li><b>이 값은 <b>전체 리뷰 수를 화면에 표시</b>할 때 사용됩니다.</li>
        </ul>
      </details>

      <details>
        <summary><b>평균 평점 계산</b></summary>
        <pre>
          <code>
            Double averageRating = reviews.stream()
              .mapToDouble(ReviewVO::getStarscore) // starscore(별점)를 double로 매핑
              .average() // 별점의 평균을 계산
              .orElse(0.0); // 리뷰가 없는 경우 0.0
          </code>
        </pre>
        <ul>
          <li>reivew 리스트에서 <b>별점(starscore)</b>을 가져옵니다 이를 <b>double</b> 타입으로 변환하고 평균을 계산합니다.</li>
          <li><b>mapToDouble(ReviewVO::getStarscore):</b> reviewVO 객체의 별점 값을 double타입으로 변환합니다.</li>
          <li><b>avarage():</b> 별점들의 평균을 계산합니다.</li>
          <li><b>orElse(0.0):<b> 리뷰가 하나도 없을 경우 (즉, 별점이 없을 경우) 평균 평점을 0.0으로 표시합니다.</li>
        </ul>
      </details>

      <details>
        <summary><b>리뷰 리스트 및 모델 추가 </b></summary>
        <ul>
          <li><b>model.addAttribute</b> 메서드를 사용하여 리뷰 리스트 및 관련 데이터를 리뷰 리스트에 전달합니다.</li>
          <li><b>list:</b> 리뷰 리스트를 모델에 추가하여 리뷰 목록을 표시할 수 있게 합니다.</li>
          <li><b>totalReviewCount:</b> 전체 리뷰 갯를 모델에 추가하여 총 리뷰 수를 화면에 표시합니다.</li>
          <li><b>averageRating:<b> 리뷰의 평균 평점을 모델에 추가하여 평균 평점을 화면에 표시합니다.</li>
          <li><b>pageObject:<b> 페이지정보를 모델에 추가하여 페이지네이션을 구현할 수 있게 합니다.</li>
          <li><b>scroll:<b> 스크롤 상태를 모델에 추가하여 사용자가 스크롤을 유지한 상태로 리뷰를 볼수있게합니다.</li>
        </ul>
      </details>

      <h3>Review List SQL 쿼리</h3>
      <img src="../../../image/projects/beetmarket/비트마켓 Review List SQL 쿼리 2 (핵심코드).png" class="zoomable"/>
      <ul>
        <li><b>위 쿼리는 리뷰 리스트를 조회하는 SQL쿼리로 주문, 상품, 회원, 리뷰답글 테이블을 조인하여 필요한 정보와 함께 리뷰의 데이터를 데이터베이스에 가져와서 특정상품에 대한 리뷰를 
                출력하며 좋아요 개수까지 계산하는 역활을 합니다.</b></li>
      </ul>

      <details>
        <summary><b>리뷰 리스트 조회</b></summary>
        <pre>
          <code>
            select 
             main.reviewNo, main.WriteDate, main.starscore, main.reviewImage, main.reviewContent,replyId, 
             main.replyContent,replyWriteDate,reviewReplyNo,
             main.goodsNo, main.orderNo, main.id, main.goodsName, photo, 
             (select count(*) from review_like rl where rl.reviewNo = main.reviewNo) as likeCount 
          </code>
        </pre>
        <ul>
          <li><b>reviewNo, WriteDate, starscore, reviewImage, reviewContent</b> 등 리뷰와 관련된 정보를 가져옵니다.</li>
          <li><b>replyId, replyContent, replyWriteDate, reviewReplyNo:</b> 리뷰의 답글 정보도 가져옵니다.</li>
          <li><b>likeCount: 리뷰에 달린 좋아요 개수</b>를 가져오며 서브쿼리를 통해 해당 리뷰에 좋아요가 몇 개 달렸는지 계산합니다.</li>
        </ul>
      </details>

      <details>
        <summary><b>메인 쿼리</b></summary>
        <pre>
          <code>
            from ( 
                select r.reviewNo, r.WriteDate, r.starscore, rr.id replyId, rr.content replyContent, 
                rr.writedate replyWriteDate, rr.reviewReplyNo, r.reviewImage, r.reviewContent, 
                o.orderNo, o.id, o.goodsNo, g.goodsName, m.photo, rownum as rnum 
                from review r, orders o, goods g, member m, review_reply rr 
          </code>
        </pre>
        <ul>
          <li><b>리뷰, 주문, 상품, 회원, 리뷰답글</b> 테이블을 조인하여 리뷰 관련 데이터를 한 번에 가져옵니다.</li>
          <li><b>r.reviewNo = rr.reviewNo(+):</b> 리뷰와 리뷰답글을 외부 조인하여 리뷰에 답글이 있을 경우 함께 가져오고 답글이 없으면 리뷰만 가져옵니다.</li>
        </ul>
      </details>

      <details>
        <summary><b>조건부 필터링</b></summary>
        <ul>
          <li>goodsNo 가 null이 아닌 경우 즉 특정 상품번(goodsNo)가 주어지며 해당 상품에 대한 리뷰만 조회합니다.</li>
          <li>상품번호가 없을 경우에는 모든 리뷰를 조회합니다.</li>
        </ul>
      </details>

      <h3>Review List HTML</h3>
      <img src="../../../image/projects/beetmarket/비트마켓Review List HTML 3 (핵심코드).png" class="zoomable"/>
      <ul>
        <li><b>위 코드는 전체 리뷰 수와 평균 평점을 표시하며 평점에 따라 별의 상태를 표현하는 역할을 합니다.</b></li>
      </ul>
      <details>
      <summary><b>전체 리뷰 수 표시</b></summary>
        <pre>
          <code>
            &lt;div class="ReviewCount"&gt;
                &lt;h4 class="totalRiv" style="position: relative; top: 18px;"&gt;전체 리뷰수&lt;/h4&gt; 
                &lt;h4 style="position: relative; right: -50px; top: 14px;"&gt;${totalReviewCount}&lt;/h4&gt;
            &lt;/div&gt;
          </code>
        </pre>
      <ul>
        <li><b>totalReviewCount:</b> 백엔드에서 전달된 전체 리뷰 수를 기반으로 해당 상품에 달린 전체 리뷰 개수가 표시됩니다.</li>
      </ul>
    </details>

    <details>
      <summary><b>전체 리뷰 수 표시</b></summary>
        <pre>
          <code>
            &lt;h4 class="totalscor mt-5" style="position: relative; top: -12px;"&gt;
                사용자 총 평점:
                &lt;fmt:formatNumber value="${averageRating}" type="number" maxFractionDigits="2" /&gt;/ 5
            &lt;/h4&gt;
          </code>
        </pre>
      <ul>
        <li><b>averageRating:</b> 소수점 둘째 자리까지 평균 평점을 계산하여 화면에 출력합니다.</li>
        <li><b>fmt:formatNumber:</b> 태그를 사용하여 소수점 이하 최대 두 자리까지 표시합니다.</li>
      </ul>
    </details>

    <details>
      <summary><b>평점에 따른 별점 표시</b></summary>
      <ul>
        <li>별점 출력
        <ul>
          <li><b>c:forEach:</b> 태그를 사용하여 5개의 별을 출력합니다.</li>
          <li><b>integerPart:</b> 평균 평점의 정수 부분을 가져옵니다.</li>
          <li><b>deimalPart:</b> 평균 평점의 소수점 첫 번째 자리를 가져옵니다.</li>
          <li><b>c:choose:</b> 조건에 따라 별의 상태를 결정합니다.</li>
        </ul>
        </li>
        <li>완전히 채워진 별
          <ul>
            <li><b><c:when test="${status.index <= integerPart}">:</b> 정수 부분보다 작거나 같은 순서의 별은 완전히 채워진 별로 표시합니다.</li>
            <li><b><i class="fa fa-star checked"></i>:</b> 채워진 별 아이콘을 표시합니다.</li>
          </ul>
        </li>
        <li>부분적으로 채워진 별
          <ul>
            <li><b><c:when test="${status.index == integerPart + 1}">:</b> 정수 부분 바로 다음 별은 소수점에 따라 부분적으로 채워진 별로 표시됩니다.</li>
            <li><b>--percent: ${decimalPart * 10}%:</b> 소수점 값을 기반으로 부분적으로 채워진 별의 비율로 <b>소주점 첫 번째 자리가</b> 5일 경우 별의 50%<b>만 채워진 상태</b>로 나타냅니다.</li>
          </ul>
        </li>
        <li>빈 별
          <ul>
            <li><b><c:otherwise>:</b> 나머지 별은 빈 별로 표시됩니다.</li>
            <li><b><i class="fa fa-star"></i>:</b> <b>채워지지 않은 빈 별</b> 아이콘을 표시합니다.</li>
          </ul>
        </li>
      </ul>
    </details>
            
    <hr>

    <h2>2.리뷰 등록</h2>
    <img src="../../../image/projects/beetmarket/비트마켓 리뷰 등록 (핵심코드).png" class="zoomable"/>
    <h3>Review List SQL 쿼리</h3>
    <img src="../../../image/projects/beetmarket/비트마켓 Review Write Controller 4 (핵심코드).png" class="zoomable"/>
      <ul>
        <li><b>위 코드는 리뷰를 작성하려고 폼 페이지로 이동시켜는 역할을 합니다.</b></li>
      </ul>
      <img src="../../../image/projects/beetmarket/비트마켓 Review Write Controller 5 (핵심코드).png" class="zoomable"/>
      <ul>
        <li><b>위 코드는 사용자가 작성한 리뷰를 서버에 저장하고 이미지 파일 과 함께 리뷰 데이터를 데이터베이스에 등록하는 역활로 등록 후 상품 상세 페이지로 리다이렉트 됩니다.</b></li>
      </ul>
      <details>
      <summary><b>대표 이미지 처리</b></summary>
        <pre>
          <code>
            vo.setReviewImage(FileUtil.upload(path, reviewFile, request));
          </code>
        </pre>
      <ul>
        <li>사용자가 업로드한 리뷰 이미지 파일을 서버에 업로드하고 그 파일 경로를 리뷰 객체에 설정합니다.</li>
        <li><b>FileUtil.upload():</b> 파일을 업로드하는 유틸리티 메서드로 파일을 저장할 경로(path) 와 파일정보(reviewFile)를 받아 처리합니다.</li>
      </ul>
    </details>
    <details>
      <summary><b>상품 번호 조회 및 설정</b></summary>
        <pre>
          <code>
            Long goodsNo = service.getGoodsNoByOrderNo(vo.getOrderNo());
            vo.setGoodsNo(goodsNo);
          </code>
        </pre>
      <ul>
        <li>주문 번호(OrderNo)를 기반으로 상품번호(goodsNo)를 조회합니다.</li>
        <li><b>getGoodsNoByOrderNo:</b> 주문번호에 해당하는 상품번호를 조회하여 리뷰 어느 상품에 대한 것이지 식별할 수 있습니다.</li>
      </ul>
    </details>
    <details>
      <summary><b>리뷰 데이터 저장</b></summary>
        <pre>
          <code>
            service.write(vo);
          </code>
        </pre>
      <ul>
        <li>주문 번호(OrderNo)를 기반으로 상품번호(goodsNo)를 조회합니다.</li>
        <li><b>service.write(vo):</b> ReviewVO객체에 담긴 리뷰내용, 사용자ID, 상품번호, 이미지 정보 등 데이터베이스에 저장합니다.</li>
      </ul>
    </details>
    <h3>Review Write SQL 쿼리</h3>
    <img src="../../../image/projects/beetmarket/비트마켓 Review Write SQL 쿼리 6(핵심코드).png" class="zoomable"/>
      <ul>
        <li>
          <b>위 쿼리는 리뷰를 데이터베이스 등록하는 SQL쿼리로 리뷰 데이터를 review 테이블에 삽입하는 역할로 리뷰번호 생성부터 리뷰내용을 데이터베이스에 저장합니다.</b>
        </li>
      </ul>
    <details>
      <summary><b>리뷰 번호 생성</b></summary>
      <pre>
        <code>
          <selectKey keyProperty="reviewNo" resultType="Long" order="BEFORE">
            select review_seq.nextval from dual
          </selectKey>
        </code>
      </pre>
      <ul>
        <li><b><selectKey>:</b>리뷰 번호를 사전에 생성하기 위해 사용됩니다.</li>
        <li><b>keyProperty="reviewNo":</b>생성된 리뷰 번호는 reivewNo 프로퍼티에 저장됩니다.</li>
        <li><b>resultType="Long":</b>생성된 리뷰 번호는 Long 타입입니다.</li>
        <li><b>order="BEFORE":</b>리뷰 번호는 데이터베이스에 삽입하기 전에 생성됩니다.</li>
        <li><b>select review_seq.nextval from dual:</b>다음 리뷰 번호를 자동으로 생성하며 더미 테이블로 시퀀스를 가져올 때 사용됩니다.</li> 
      </ul>
    </details>
    <details>
      <summary><b>리뷰 삽입 쿼리</b></summary>
      <ul>
        <li><b>reviewNo:</b> 리뷰번호 (자동 생성된 값)</li>
        <li><b>reviewContent:</b> 리뷰내용 (사용자가 작성한 리뷰 텍스트)</li>
        <li><b>reviewImage:</b> 리뷰이미지 (리뷰와 함께 업로드된 이미지 파일)</li>
        <li><b>starscore:</b> 별점 점수(사용자가 입력한 별점)</li>
        <li><b>orderNo:</b> 주문 번호 (해당 리뷰가 작성된 주문 정보)</li> 
      </ul>
    </details>

    <h3>Review Write JavaScript</h3>
    <img src="../../../image/projects/beetmarket/비트마켓 Review Write JavaScript  7(핵심코드).png" class="zoomable"/>
    
    <ul>
      <li>
        <b>위 스크립트는 리뷰 작성 모달 창을 열고 선택한 주문 정보를 모달에 표시하며, 이미지 미리보기 기능을 제공합니다.</b>
      </li>
    </ul> <!-- 여기서 ul을 닫는다 -->
    
    <details>
      <summary><b>리뷰 작성 모달 열기 ($(".reviewBtn").click)</b></summary>
      <ul>
        <li><b>클릭 이벤트:</b> .reviewBtn 클래스를 가진 버튼을 클릭하면 리뷰 작성 모달이 열립니다.</li>
        <li>주문 정보 가져오기
          <ul>
            <li><b>$(this).closest(".orderListItem"):</b> 클릭한 버튼이 주문 항목(.orderListItem)를 찾습니다.</li>
          </ul>
        </li>
        <li>주문 정보
          <ul>
            <li><b>orderNo:</b> 주문항목에서 주문 번호를 가져옵니다.</li>
            <li><b>goodsName:</b> 주문 항목에서 상품 이름을 가져옵니다.</li>
            <li><b>optionName:</b> 문 항목에서 상품 옵션명을 가져옵니다.</li>
            <li><b>amount:</b> 주문 항목에서 수량을 가져옵니다.</li>
          </ul>
        </li>
        <li>모달 창에 값 설정
          <ul>
            <li><b>주문번호, 상품명, 옵션명, 수량</b>을 모달창에 해당 필드에 표시하도록 값을 가져옵니다.</li>
          </ul>
        </li>         
      </ul>
    </details>
    
    <details>
      <summary><b>이미지 미리보기 (previewImage)</b></summary>
      <ul>
        <li>파일 선택 이벤트 : 파일이 선택되면 previewImage 호출됩니다.</li>
        <li>FileReader 사용 : 선택한 파일을 읽어 이미지를 미리보기로 표시합니다.
          <ul>
            <li><b>event.target.files[0]:</b> 선택된 파일을 가져옵니다.</li>
            <li><b>reader.onload:</b> 파일이 성곡적으로 읽혔을 때 이미지 미리보기 가 표시됩니다.</li>
          </ul>
        </li>
        <li><b>오류 처리</b>
          <ul>
            <li><b>reader.onerror :</b> 파일을 읽는 중 오류가 발생하면 경고 메시지를 표시합니다.</li>
          </ul>
        </li>        
      </ul>
    </details>
    
    
    <h3>Review Write HTML(JSP)</h3>
    <img src="../../../image/projects/beetmarket/비트마켓 Review Write HTML(JSP) 12(핵심코드).png" class="zoomable" />
    
    <ul>
      <li><b>위 코드는 리뷰 작성 모달 창에서 상품정보, 별점, 리뷰내용, 이미지를 작성할 수 있도록 구성 되었습니다.</b></li>
    </ul>
    
    <details>
      <summary><b>상품 정보 표시</b></summary>
      <ul>
        <li>JavaScript의 jQuery를 사용하여 사용자가 리뷰 버튼을 클릭할 때마다 해당 .orderListItem이라는 부모 클래스에서 주문 번호, 상품명, 옵션명, 수량 정보를 동적으로 가져옵니다.</li>
      </ul>
    </details>
    
    <details>
      <summary><b>별점 입력</b></summary>
      <ul>
        <li>별점은 필수 항목이므로 사용자는 별점(1~5)점 중 하나를 선택하여 상품에 대한 만족도를 평가할 수 있습니다.</li>
      </ul>
    </details>

    <details>
      <summary><b>리뷰 내용 입력</b></summary>
      <ul>
        <li>리뷰 내용을 작성하는 텍스트 필드가 제공되며 필수 입력 항목입니다.</li>
      </ul>
    </details>

    <details>
      <summary><b>리뷰 이미지 업로드 및 미리보기</b></summary>
      <ul>
        <li>사용자는 리뷰에 이미지를 업로드 할 수 있으며 업로드 된 이미지를 미리보기 표시 할수있습니다.</li>
      </ul>
    </details>            

    <details>
      <summary><b>주문 번호 입력</b></summary>
      <ul>
        <li>해당 리뷰가 어떤 주문과 연결되었는지 서버에 전달하며 hidden input필드를 사용하여 주문번호는 숨겼습니다.</li>
      </ul>
    </details> 
            
    <hr>

    <h2>3.상품 Q&A 질문 등록</h2>
            
    <h3>GoodsQ&A Write Controller</h3>
    <img src="../../../image/projects/beetmarket/비트마켓 GoodsQ&A Write Controller 9(핵심코드).png" class="zoomable"/>
          
    <ul>
      <li><b>위 코드는 상품Q&A를 등록한 데이터를 JSON 형태로 사용자에게 응답하는 기능을 처리합니다.</b></li>
    </ul>
          
    <details>
      <summary><b>사용자 ID설정</b></summary>
      <ul>
        <li><b>vo.setId(LoginUtil.getId(session);</b>을 사용해 현재 로그인한 사용자의 ID를 Goods_QnaVO 객체에 저장합니다.</li>
      </ul>
    </details>
          
    <details>
      <summary><b>Q&A등록 처리</b></summary>
      <ul>
        <li><b>service.write(vo)</b>에서 VO를 서비스로 전달해 데이터를 데이터베이스에 저장합니다.</li>
      </ul>
    </details>
        
    <details>
      <summary><b>JSON 응답 생성</b></summary>
      <ul>
        <li>등록이 완료되면 성공 상태와 메시지 그리고 해당 Q&A가 어떤 상품(goodsNo)과 연결 되어있는지 추가 하며 JSON형식의 응답을 사용자에게 반환합니다.</li>
      </ul>
    </details>

    <h3>GoodsQ&A Write SQL 쿼리</h3>
    <img src="../../../image/projects/beetmarket/비트마켓 GoodsQ&A Wrtie SQL 쿼리 10(핵심코드).png" class="zoomable"/>
      
    <ul>
      <li><b>위 코드는 상품문의를 데이터베이에 등록하는 SQL쿼리로 상품 Q&A데이터를 goods_qna테이블에 삽입하는 역할을 합니다.</b></li>
    </ul>
        
    <details>
      <summary><b>상품 Q&A번호 생성</b></summary>
      <pre>
        <code>
          <selectKey keyProperty="goodsQNA" resultType="Long" order="BEFORE">
            select goods_qna_seq.nextval from dual
          </selectKey>
        </code>
      </pre>
      <ul>
        <li><b><slelctKey>:</b> Q&A번호를 자동으로 생성 시퀀스goods_qna_seq를 사용해 새로운 상품 Q&A번호를 생성합니다.</li>
        <li><b>keyProperty="goodsQNA":</b> 자동으로 생성된 상품 Q&A 번호는 goodsQNA 속성에 저장됩니다.</li>
        <li><b>resultType="Long":</b> 생성된 Q&A번호는 Long 타입입니다.</li>
        <li><b>order="BEFORE":</b> 번호가 데이터베이스 삽입되게 전에 생성합니다.</li>
        <li><b>select goods_qna_seq.nextval from dual:</b> Oracle 시퀀스(goods_qna_seq)를 사용해여 새로운 Q&A번호를 생성합니다.</li>
      </ul>
    </details>
        
    <details>
      <summary><b>Q&A 데이터 삽입 쿼리</b></summary>
      <ul>
        <li>insert into goods_qna: goods_qna 테이블에 새로운 상품 Q&A 데이터를 삽입합니다.</li>
        <li> 삽입할 컬럼
          <ul>
            <li><b>goodsQNA:</b> 상품Q&A번호 (자동 생성된 값)</li>
            <li><b>goodsNo:</b> 상품 번호 (어떤 상품에 대한 Q&A인지 식별하기 위한 번호)</li>
            <li><b>question:</b> 사용자가 작성한 질문 내용</li>
            <li><b>id:</b> 질문을 작성한 사용자 ID</li>
          </ul>
        </li>
      </ul>
    </details>

    <h3>GoodsQ&A Write JavaScript</h3>
    <img src="../../../image/projects/beetmarket/비트마켓 GoodsQ&A Write JavaScript 11(핵심코드).png" class="zoomable"/>
      
    <ul>
      <li><b>위 스크립트는 리뷰 작성 모달 창을 열고 선택한 주문 정보를 모달에 표시하며, 이미지 미리보기 기능을 제공합니다.</b></li>
    </ul>
          
    <details>
      <summary><b>리뷰 작성 모달 열기 ($(:”.reviewBtn”).click)</b></summary>
      <ul>
        <li><b>클릭 이벤트:.reviewBtn </b>클래스를 가진 버튼을 클릭하면 리뷰 작성 모달이 열립니다.</li>
        <li> 주문 정보 가져오기
          <ul>
            <li><b>goodsQNA:</b> 클릭한 버튼이 주문 항목(.orderListItem)를 찾습니다.(/li>
            <li><b>goodsNo:</b> 상품 번호 (어떤 상품에 대한 Q&A인지 식별하기 위한 번호)</li>
            <li><b>question:</b> 사용자가 작성한 질문 내용</li>
            <li><b>id:</b> 질문을 작성한 사용자 ID</li>
          </ul>
        </li>
        <li> 주문 정보
          <ul>
            <li><b>orderNo:</b> 주문항목에서 주문 번호를 가져옵니다.(/li>
            <li><b>goodsName:</b> 주문 항목에서 상품 이름을 가져옵니다.</li>
            <li><b>optionName:</b> 주문 항목에서 상품 옵션명을 가져옵니다.</li>
            <li><b>amount:</b> 주문 항목에서 수량을 가져옵니다.</li>
          </ul>
        </li>
        <li> 모달 창에 값 설정
          <ul>
            <li><b>주문번호, 상품명, 옵션명, 수량</b>을 모달창에 해당 필드에 표시하도록 값을 가져옵니다.(/li>
          </ul>
        </li>
      </ul>
    </details>
          
    <details>
      <summary><b>이미지 미리보기 (previewImage)</b></summary>
      <ul>
        <li><b>파일 선택 이벤트 : 파일이 선택되면 previewImage 호출됩니다.</li>
        <li>FileReader 사용 : 선택한 파일을 읽어 이미지를 미리보기로 표시합니다.
          <ul>
            <li><b>event.target.files[0]:</b> 선택된 파일을 가져옵니다.(/li>
            <li><b>reader.onload:</b> 파일이 성곡적으로 읽혔을 때 이미지 미리보기 가 표시됩니다.</li>
          </ul>
        </li>
        <li>오류 처리
          <ul>
            <li><b>reader.onerror:</b> 파일을 읽는 중 오류가 발생하면 경고 메시지를 표시합니다.(/li>
          </ul>
        </li>
      </ul>
   </details>

  <h3>Review Write HTML(JSP)</h3>
  <img src="../../../image/projects/beetmarket/비트마켓 Review Write HTML(JSP) 12(핵심코드).png" class="zoomable"/>
    <ul>
      <li><b>위 코드는 리뷰 작성 모달 창에서 상품 정보, 별점, 리뷰 내용, 이미지를 작성할 수 있도록 구성 되었습니다.</b></li>
    </ul>
    <details>
      <summary><b>상품 정보 표시</b></summary>
      <ul>
        <li><b>JavaScript의 jQuery를 사용하여 사용자가 리뷰 버튼을 클릭할 때마다 해당 <b.orderListItem></b>이라는 부모 클래스에서 <b>주문 번호, 상품명, 옵션명, 수량</b> 정보를 동적으로 가져옵니다.</li>
      </ul>
    </details>
            
    <details>
      <summary><b>별점 입력</b></summary>
      <ul>
        <li>별점은 필수 항목이므로 사용자는 별점(1~5)점 중 하나를 선택하여 상품에 대한 만족도를 평가할 수 있습니다.</li>
      </ul>
    </details>
            
    <details>
      <summary><b>리뷰 내용 입력</b></summary>
      <ul>
        <li>리뷰 내용을 작성하는 텍스트 필드가 제공되며 필수 입력 항목입니다.</li>
      </ul>
    </details>
            
    <details>
      <summary><b>리뷰 이미지 업로드 및 미리보기</b></summary>
      <ul>
        <li>사용자는 리뷰에 이미지를 업로드 할 수 있으며 업로드 된 이미지를 미리보기 표시 할수있습니다.</li>
      </ul>
    </details>
            
    <details>
      <summary><b>주문 번호 입력</b></summary>
      <ul>
        <li>해당 리뷰가 어떤 주문과 연결되었는지 서버에 전달하며 hidden input필드를 사용하여 주문번호는 숨겼습니다.</li>
      </ul>
    </details>

    <hr>

    <h2>3.상품 Q&A 질문 등록</h2>
    <img src="../../../image/projects/beetmarket/비트마켓 3.상품 Q&A 질문 등록 (핵심코드).png" class="zoomable"/> 
            
    <h3>GoodsQ&A Write Controller</h3>
    <img src="../../../image/projects/beetmarket/비트마켓 GoodsQ&A Write Controller 9(핵심코드).png" class="zoomable"/>
            
    <ul>
      <li><b>위 코드는 상품Q&A를 등록한 데이터를 JSON 형태로 사용자에게 응답하는 기능을 처리합니다.</b></li>
    </ul>
            
    <details>
      <summary><b>사용자 ID 설정</b></summary>
      <ul>
        <li><b>vo.setId(LoginUtil.getId(session);</b>을 사용해 현재 로그인한 사용자의 ID를 Goods_QnaVO 객체에 저장합니다.</li>
      </ul>
    </details>
      
    <details>
      <summary><b>Q&A등록 처리</b></summary>
      <ul>
        <li><b>service.write(vo)</b>에서 VO를 서비스로 전달해 데이터를 데이터베이스에 저장합니다.</li>
      </ul>
    </details>
      
    <details>
      <summary><b>JSON 응답 생성</b></summary>
      <ul>
        <li>등록이 완료되면 성공 상태와 메시지 그리고 해당 Q&A가 어떤 상품(goodsNo)과 연결 되어있는지 추가 하며 JSON형식의 응답을 사용자에게 반환합니다.</li>
      </ul>
    </details>

    <h3>GoodsQ&A Write SQL 쿼리</h3>
    <img src="../../../image/projects/beetmarket/비트마켓 GoodsQ&A Wrtie SQL 쿼리 10(핵심코드).png" class="zoomable"/>
      
    <ul>
      <li><b>위 코드는 상품문의를 데이터베이스에 등록하는 SQL쿼리로 상품Q&A데이터를 goods_qna 테이블에 삽입하는 역할을 합니다.</b></li>
    </ul>
      
    <details>
      <summary><b>상품 Q&A 번호 생성</b></summary>
      <pre>
        <code>
          <selectKey keyProperty="goodsQNA" resultType="Long" order="BEFORE">
            select goods_qna_seq.nextval from dual
          </selectKey>
        </code>
      </pre>
      <ul>
        <li><b><selectKey>:</b>Q&A번호를 자동으로 생성 시퀀스goods_qna_seq를 사용해 새로운 상품 Q&A번호를 생성합니다.</li>
        <li><b>keyProperty="goodsQNA":</b>자동으로 생성된 상품 Q&A 번호는 goodsQNA 속성에 저장됩니다.</li>
        <li><b>resultType="Long":</b>생성된 Q&A번호는 Long 타입입니다.</li>
        <li><b>order="BEFORE":</b>번호가 데이터베이스 삽입되게 전에 생성합니다.</li>
        <li><b>select goods_qna_seq.nextval from dual:</b>Oracle 시퀀스(goods_qna_seq)를 사용해여 새로운 Q&A번호를 생성합니다.</li>
      </ul>
    </details>
      
    <details>
      <summary><b>Q&A 데이터 삽입 쿼리</b></summary>
      <ul>
        <li>insert into goods_qna: goods_qna 테이블에 새로운 상품 Q&A 데이터를 삽입합니다.</li>
        <li><b>삽입할 컬럼</b>
          <ul>
            <li><b>goodsQNA:</b> 상품 Q&A 번호 (자동 생성된 값)</li>
            <li><b>goodsNo:</b> 상품 번호 (어떤 상품에 대한 Q&A인지 식별하기 위한 번호)</li>
            <li><b>question:</b> 사용자가 작성한 질문 내용</li>
            <li><b>id:</b> 질문을 작성한 사용자 ID</li>
          </ul>
        </li>
      </ul>
    </details> 

    <h3>GoodsQ&A Write JavaScript</h3>
    <img src="../../../image/projects/beetmarket/비트마켓 GoodsQ&A Write JavaScript 11(핵심코드).png" class="zoomable"/>
      
    <ul>
      <li><b>위 스크립트는 모달창에서 질문을 등록하는 기능으로 등록버튼을 클릭했을 때 AJAX 요청을 통해 서버로 질문 데이터를 전송하고 서버의 응답에 따라 화면을 갱신합니다.</b></li>
    </ul>
      
    <details>
      <summary><b>상품번호 확인</b></summary>
      <pre>
        <code>
          var goodsno = $(&quot;#GQ_WriteModal&quot;).val();
      
          if (!goodsno) {
              alert(&quot;상품 번호(goodsno)가 정의되지 않았습니다.&quot;);
              return;
          }
        </code>
      </pre>
      <ul>
        <li>상품번호는 모달 창의 숨겨진 필드에서 가져옵니다.</li>
        <li><b>keyProperty="goodsQNA":</b>자동으로 생성된 상품 Q&A 번호는 goodsQNA 속성에 저장됩니다.</li>
        <li>상품번호가 없으면 알림을 띄웁니다.</li>
      </ul>
    </details>
      
    <details>
      <summary><b>질문 내용 확인</b></summary>
       <pre>
        <code>
          var question = $(&quot;#goods_Qnaquestion&quot;).val();
      
          if (!question.trim()) {
              alert(&quot;질문 내용을 입력해주세요.&quot;);
              return;
          }
        </code>
      </pre>
      <ul>
        <li>질문 내용을 입력하지 않은 경우 경고 메시지를 표시합니다.</li>
        <li><b>.trim():</b> 입력된 값의 앞뒤 공백을 제거하여 내용이 비어 있는지 확인합니다.</li> 
      </ul>
    </details> 
      
    <details>
      <summary><b>질문 데이터 생성</b></summary>
       <pre>
        <code>
          let goodsQna = {
              goodsNo: parseInt(goodsno), // 상품 번호를 숫자로 변환
              question: question
          };
        </code>
      </pre>
      <ul>
        <li><b>상품 번호와 질문 내용</b>을 포함한 <b>Q&A 데이터를 객체로 구성</b>합니다.</li>
        <li>goodsNo는 숫자형으로 변환하여 저장합니다.</li> 
      </ul>
    </details>
      
    <details>
      <summary><b>AJAX요청</b></summary>
      <ul>
        <li><b>$.ajax():</b> AJAX 요청을 통해 서버에 상품 Q&A 데이터를 전송합니다.
        <ul>
          <li>type: "POST" "HTTP POST" 방식으로 데이터를 전송합니다.</li>
          <li><b>url:"/goods_qna/write.do": </b> 서버의 /goods_qna/write.do 경로로 데이터를 전송합니다.</li>
          <li><b>data:JSON.stringify(goodsQna): </b> Q&A 데이터 객체를 JSON 형식으로 변환하여 서버에 전송합니다.</li>
          <li><b>contentType:"application/json": </b> 전송하는 데이터가 JSON 형식임을 서버에 알립니다.</li>
          <li><b>dataType:"json": </b> 서버로부터의 응답을 JSON 형식으로 처리합니다.</li>
        </ul>
        </li>
        <li><b>성공 콜백(success)
          <ul>
            <li>서버로부터 응답이 성공적이면 모달 창을 닫고 <b>($("#GQWModal").modal("hide")), Q&A 리스트를 다시 로드</b>합니다.</li>
            <li><b>$(".reviewList").load(...):</b> Q&A 목록을 다시 불러와 화면을 갱신합니다.</li>
          </ul>
        </li>              
        <li>오류 콜백(error)
          <ul>
            <li>AJAX 요청 중 오류가 발생하면 오류 메시지를 표시합니다.</li>
          </ul>
        </li> 
      </ul>
    </details> 
    </details>
  </div>

  <hr>

  <div class="Error-Resolution">
    <details>
    <summary class="summary-heading">🔧오류해결</summary>
    <h2>1.컨트롤러 어노테이션 오류</h2>
    <img src="../../../image/projects/beetmarket/비트마켓 1. 컨트롤러 어노테이션 오류 1 (오류해결).png" class="zoomable"/ >
    <img src="../../../image/projects/beetmarket/비트마켓 1. 컨트롤러 어노테이션 오류 2 (오류해결).png" class="zoomable"/ >
    <p><b>오류 설명:</b> 컨트롤러에 실수로 @Controller 대신 @RestController를 사용하여 JSON 응답이 반환되는 문제가 발생했습니다. 
      @RestController는 주고 JSON 또는 XML데이터를 반환할 떄 사용해 되며 HTML을 반환하는 @Controller와는 용도가 다릅니다.</p>
    <p><b>오류 발생:</b> 브라우저 화면에서 예상했던 HTML 화면대신 JSON 데이터가 출력되는 것을 발견했습니다.</p>
    <img src="../../../image/projects/beetmarket/비트마켓 1. 컨트롤러 어노테이션 오류 3 (오류해결).png" class="zoomable"/ > 
    <p><b>오류해결:</b> @RestController를 @Controller로 수정하여 정상적으로 화면에 출력이 되었습니다.</p>

    <hr>

    <h2>2.모달 닫기 후 백드롭이 제거되지 않는 문제</h2>
    <img src="../../../image/projects/beetmarket/비트마켓 2. 모달 닫기 후 백드롭이 제거되지 않는 문제 1 (오류해결).png" class="zoomable"/ >
    <img src="../../../image/projects/beetmarket/비트마켓 2. 모달 닫기 후 백드롭이 제거되지 않는 문제 2 (오류해결).png" class="zoomable"/ >
    <p><b>오류 설명:</b> 모달창을 닫았을 때 검은배경(백드롭)이 사라지지 않는 문제 발생.</p>
    <p><b>오류 발생:</b> 상품Q&A에서 질문 수정할때 오류 확인.</p>
    <img src="../../../image/projects/beetmarket/비트마켓 2. 모달 닫기 후 백드롭이 제거되지 않는 문제 3 (오류해결).png" class="zoomable"/ > 
    <p><b>오류해결:</b> AJAX 모달 폼에 
    <pre>
      <code>
         $(&#39;#GQUModal&#39;).on(&#39;hidden.bs.modal&#39;, function () { 
            $(&#39;.modal-backdrop&#39;).remove();
        });         
      </code>
    </pre>
    이라는  이벤트 핸들러를 추가하여 백드롭을 수동으로 제거 할 수있도록 오류를 해결했습니다.</p>      
  </div>
</details>
</div>

<hr>

</div>        
<!-- 모달(확대된 이미지) -->
<div class="modal" id="imageModal">
  <img id="modalImg">
</div>

<div class="mainPage-card">
    <p>메인 페이지</p>
     <a href="https://leeleeseop.github.io/leesub-github.io/">뒤로 돌아가기</a>
</div>
            
<br>
            
<div class="projectcode-card">
    <p>프로젝트 코드</p>
     <a onclick="window.open('https://github.com/leeleeseop/TeamProject-SedEx.git', '_blank')">전체코드 보기</a>
</div>
               
  <script src="../../../JavaScript/beetmarket/beetmarkt.js"></script> 
<div style="height: 50px;"></div>
</body>
</html>
